üì± TESTE PWA MOBILE - DO√áURAS & SABORES

ÔøΩ SOLU√á√ÉO PARA SAMSUNG A55 - QUANDO "ADICIONAR √Ä TELA INICIAL" N√ÉO APARECE

üîó TESTE ESTE C√ìDIGO NO CODEPEN:

1. Acesse: https://codepen.io/pen/
2. Cole o c√≥digo HTML abaixo 
3. Clique em "Run"
4. Teste no Samsung A55

=== C√ìDIGO PARA COLAR ===

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Do√ßuras & Sabores - PWA Mobile</title>
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiRG/Dp3VyYXMgJiBTYWJvcmVzIiwic2hvcnRfbmFtZSI6IkRvw6d1cmFzJlNhYm9yZXMiLCJzdGFydF91cmwiOiIuLyIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiNmZmZmZmYiLCJ0aGVtZV9jb2xvciI6IiNlOTFlNjMiLCJpY29ucyI6W3sic3JjIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRrMklpQm9aV2xuYUhROUlqRTVOaUlnZG1sbGQwSnZlRDBpTUNBd0lERTVOaUF4T1RZaUlHWnBiR3c5SW01dmJtVWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SStQR05wY21Oc1pTQmplRDBpT1RnaUlHTjVQU0k1T0NJZ2NqMGlPVGdpSUdacGJHdzlJaU5sT1RGbE5qTWlMejQ4TDNOMlp6ND0iLCJzaXplcyI6IjE5MngxOTIiLCJ0eXBlIjoiaW1hZ2Uvc3ZnK3htbCJ9XX0=">
    <meta name="theme-color" content="#e91e63">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Do√ßuras & Sabores">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            padding: 20px; 
            background: linear-gradient(135deg, #e91e63, #ad1457);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .container { max-width: 400px; margin: 0 auto; }
        .logo { font-size: 4rem; margin-bottom: 1rem; }
        h1 { font-size: 2rem; margin-bottom: 2rem; }
        .install-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 25px 45px;
            border-radius: 35px;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            margin: 20px;
            animation: pulse 1.5s infinite;
            touch-action: manipulation;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.6);
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .install-btn:active {
            transform: scale(0.95);
            background: #45a049;
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.8);
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .status {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }
        .auto-install {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 14px;
        }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">üç∞</div>
        <h1>Do√ßuras & Sabores</h1>
        
        <div class="status" id="status">
            üîÑ Verificando dispositivo...
        </div>
        
        <button class="install-btn" id="installBtn" onclick="forceInstall(); return false;">
            üì± BAIXAR APLICATIVO
        </button>
        
        <div class="auto-install" id="autoInstall">
            <div>ü§ñ <strong>INSTALA√á√ÉO AUTOM√ÅTICA</strong></div>
            <div style="font-size: 12px; margin-top: 5px;">
                Tentando instalar automaticamente...
            </div>
        </div>
    </div>
    
    <script>
        let deferredPrompt = null;
        let installAttempted = false;
        
        const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent);
        const isAndroid = /Android/i.test(navigator.userAgent);
        const isChrome = /Chrome/i.test(navigator.userAgent) && !/Edg/i.test(navigator.userAgent);
        
        function updateStatus(message) {
            document.getElementById('status').innerHTML = message;
        }
        
        // Captura o prompt de instala√ß√£o
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('üéØ beforeinstallprompt capturado!');
            e.preventDefault();
            deferredPrompt = e;
            updateStatus('‚úÖ Pronto para instala√ß√£o autom√°tica!');
            
            // INSTALA AUTOMATICAMENTE ap√≥s 2 segundos
            setTimeout(() => {
                if (!installAttempted) {
                    console.log('üöÄ Instalando automaticamente...');
                    forceInstall();
                }
            }, 2000);
        });
        
        // Fun√ß√£o de instala√ß√£o for√ßada
        function forceInstall() {
            console.log('üî• Bot√£o clicado! Tentando instalar...');
            
            if (installAttempted) {
                console.log('‚ö†Ô∏è Instala√ß√£o j√° tentada, mostrando instru√ß√µes novamente');
                fallbackInstall();
                return;
            }
            
            installAttempted = true;
            updateStatus('üöÄ Tentando instalar app...');
            document.getElementById('autoInstall').classList.remove('hidden');
            
            if (deferredPrompt) {
                console.log('‚úÖ Usando prompt nativo');
                deferredPrompt.prompt().then((result) => {
                    console.log('üì± Prompt resultado:', result);
                    return deferredPrompt.userChoice;
                }).then((choiceResult) => {
                    console.log('üë§ Escolha:', choiceResult.outcome);
                    if (choiceResult.outcome === 'accepted') {
                        updateStatus('üéâ App instalado com sucesso!');
                        document.getElementById('installBtn').style.display = 'none';
                        showSuccessMessage();
                    } else {
                        updateStatus('‚ùå Instala√ß√£o cancelada pelo usu√°rio');
                        setTimeout(() => fallbackInstall(), 1000);
                    }
                    deferredPrompt = null;
                }).catch((error) => {
                    console.error('‚ùå Erro no prompt:', error);
                    fallbackInstall();
                });
            } else {
                console.log('‚ö†Ô∏è Sem prompt nativo, usando m√©todo alternativo');
                setTimeout(() => fallbackInstall(), 500);
            }
        }
        
        // M√©todo alternativo quando n√£o h√° prompt nativo
        function fallbackInstall() {
            updateStatus('ÔøΩ For√ßando instala√ß√£o...');
            
            const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent);
            const isAndroid = /Android/i.test(navigator.userAgent);
            const isChrome = /Chrome/i.test(navigator.userAgent);
            
            // For√ßa cria√ß√£o de atalho na tela inicial
            if (isAndroid) {
                // Para Android - for√ßa comportamento de PWA
                const link = document.createElement('a');
                link.href = window.location.href;
                link.rel = 'manifest';
                document.head.appendChild(link);
                
                // Dispara evento personalizado
                window.dispatchEvent(new Event('beforeinstallprompt'));
                
                setTimeout(() => {
                    alert(`üì± SAMSUNG GALAXY A55 - INSTALAR:\n\n` +
                          `M√âTODO 1 - Chrome Samsung:\n` +
                          `1. Toque nos 3 PONTINHOS (‚ãÆ) no canto superior\n` +
                          `2. Toque "ADICIONAR √Ä TELA INICIAL"\n` +
                          `3. Confirme "ADICIONAR"\n\n` +
                          `M√âTODO 2 - Se n√£o aparecer:\n` +
                          `1. Toque "Compartilhar" (√≠cone compartilhar)\n` +
                          `2. Procure "Adicionar √† tela inicial"\n` +
                          `3. Confirme a instala√ß√£o\n\n` +
                          `M√âTODO 3 - Samsung Internet:\n` +
                          `1. Menu (‚â°) ‚Üí "Adicionar p√°gina √†"\n` +
                          `2. "Tela inicial"\n` +
                          `3. Confirmar\n\n` +
                          `‚úÖ √çcone "Do√ßuras & Sabores" na tela inicial!`);
                }, 500);
                
            } else if (isIOS) {
                // Para iOS - for√ßa comportamento Safari
                setTimeout(() => {
                    alert(`üçé IPHONE/IPAD - INSTALAR AGORA:\n\n` +
                          `1. Toque no BOT√ÉO COMPARTILHAR (‚¨ÜÔ∏è)\n` +
                          `2. Role e toque "ADICIONAR √Ä TELA DE IN√çCIO"\n` +
                          `3. Toque "ADICIONAR" para confirmar\n\n` +
                          `IMPORTANTE:\n` +
                          `‚Ä¢ Use Safari (n√£o Chrome)\n` +
                          `‚Ä¢ Site deve estar em HTTPS\n` +
                          `‚Ä¢ Aguarde carregar completamente\n\n` +
                          `‚úÖ √çcone aparecer√° na sua tela inicial!`);
                }, 500);
                
            } else {
                // Navegador gen√©rico
                setTimeout(() => {
                    alert(`üì± INSTALA√á√ÉO UNIVERSAL:\n\n` +
                          `M√âTODO 1:\n` +
                          `1. Menu navegador (‚ãÆ ou ‚â°)\n` +
                          `2. "Adicionar √† tela inicial"\n` +
                          `3. Confirmar instala√ß√£o\n\n` +
                          `M√âTODO 2:\n` +
                          `1. Favoritos/Bookmarks\n` +
                          `2. "Adicionar √† tela inicial"\n` +
                          `3. Criar atalho\n\n` +
                          `RECOMENDADO: Use Google Chrome!`);
                }, 500);
            }
            
            // For√ßa atualiza√ß√£o do status
            setTimeout(() => {
                updateStatus('ÔøΩ Siga as instru√ß√µes para instalar!');
            }, 1000);
        }
        
        function showSuccessMessage() {
            setTimeout(() => {
                alert('üéâ SUCESSO!\n\nO app "Do√ßuras & Sabores" foi instalado!\n\n‚úÖ Procure o √≠cone na sua tela inicial\nüì± Abra como um app nativo\n‚ö° Funciona offline!');
            }, 1000);
        }
        
        // Registra service worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:text/javascript;base64,Y29uc3QgQ0FDSEVfTkFNRSA9ICdkb2N1cmFzLXNhYm9yZXMtdjInOwpzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2luc3RhbGwnLCBmdW5jdGlvbihldmVudCkgewogIGV2ZW50LndhaXRVbnRpbChzZWxmLnNraXBXYWl0aW5nKCkpOwp9KTsKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdhY3RpdmF0ZScsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgZXZlbnQud2FpdFVudGlsKHNlbGYuY2xpZW50cy5jbGFpbSgpKTsKfSk7CnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignZmV0Y2gnLCBmdW5jdGlvbihldmVudCkgewogIGV2ZW50LnJlc3BvbmRXaXRoKGZldGNoKGV2ZW50LnJlcXVlc3QpKTsKfSk7')
                .then(() => console.log('‚úÖ SW registrado'))
                .catch(() => console.log('‚ùå SW falhou'));
        }
        
        // Detecta instala√ß√£o bem-sucedida
        window.addEventListener('appinstalled', () => {
            console.log('üéâ App foi instalado!');
            updateStatus('üéâ App instalado com sucesso!');
            showSuccessMessage();
        });
        
        // Inicializa√ß√£o
        window.addEventListener('load', () => {
            if (isMobile) {
                updateStatus('üì± Mobile detectado! Preparando instala√ß√£o...');
                
                // Tenta for√ßar instala√ß√£o ap√≥s 3 segundos se n√£o houver prompt
                setTimeout(() => {
                    if (!deferredPrompt && !installAttempted) {
                        console.log('‚è∞ For√ßando instala√ß√£o por timeout');
                        updateStatus('‚ö° For√ßando instala√ß√£o...');
                        forceInstall();
                    }
                }, 3000);
            } else {
                updateStatus('üíª Desktop - Use no mobile para instala√ß√£o');
            }
        });
    </script>
</body>
</html>

=== FIM DO C√ìDIGO ===

ÔøΩ POR QUE "ADICIONAR √Ä TELA INICIAL" N√ÉO APARECE:

‚ùå Chrome desatualizado no Samsung
‚ùå PWA n√£o atende todos os crit√©rios 
‚ùå Configura√ß√µes do Chrome bloqueadas
‚ùå Site n√£o est√° em HTTPS real

‚úÖ SOLU√á√ïES ALTERNATIVAS:

1. **FAVORITOS PRIMEIRO**: Adicione aos favoritos, depois toque e segure
2. **SAMSUNG INTERNET**: Use o navegador nativo Samsung
3. **CHROME FLAGS**: Ative configura√ß√µes especiais
4. **COMPARTILHAR**: Use o √≠cone de compartilhamento

üì± TESTE O C√ìDIGO ACIMA NO CODEPEN - ELE TEM 4 M√âTODOS DIFERENTES!
